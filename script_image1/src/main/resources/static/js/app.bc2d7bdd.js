(function(){"use strict";var e={2099:function(e,a,t){var l=t(3751),s=t(641),r=t(953),c=t(4335),i=(t(4114),t(33));const n={class:"product-list-container"},o={class:"list-header"},u={class:"search-bar"},d={class:"button-group"},v={class:"category-tabs"},p=["onClick"],g={class:"product-grid"},k={class:"card-header"},h={class:"product-code"},y=["onClick"],f={class:"image-wrapper"},b=["src"],m={class:"product-info"},C={class:"category-tag"},L={class:"name"},w={class:"price-row"},_={class:"price"},E={key:0},K={key:1},X={key:0,class:"no-data"},O=35;var R={__name:"ProductList",props:["initialCategory"],emits:["view-detail","update-category"],setup(e,{emit:a}){const t=e,R=a,j=(0,r.KR)([]),I=(0,r.KR)(""),A=(0,r.KR)(t.initialCategory||"ë°ìŠ¤í¬íƒ‘"),S=(0,r.KR)(!1),x=(0,r.KR)(0),F=(0,r.KR)(!1),D=(0,r.KR)(!1),Q=(0,r.KR)(null);let T=null;const B=[{id:"ë°ìŠ¤í¬íƒ‘",name:"ë°ìŠ¤í¬íƒ‘"},{id:"ì†ŒíŒŒ",name:"ì†ŒíŒŒ"},{id:"íŒ¨ë”©",name:"íŒ¨ë”©"},{id:"ì‹ ë°œ",name:"ì‹ ë°œ"}],P=()=>{j.value=[],x.value=0,D.value=!1,U()},W=e=>{A.value=e,R("update-category",e),P()},N=()=>{S.value=!S.value,P()},U=async()=>{if(F.value||D.value)return;F.value=!0;const e=S.value?"http://localhost:8083/api/new/product":"http://localhost:8083/api/product";try{const a=await c.A.get(e,{params:{page:x.value,size:O,category:A.value,query:I.value}}),t=a.data;t.length<O&&(D.value=!0),j.value.push(...t),x.value++}catch(a){console.error("Fetch error:",a)}finally{F.value=!1}};return(0,s.wB)(I,()=>{P()}),(0,s.sV)(()=>{U(),T=new IntersectionObserver(e=>{!e[0].isIntersecting||F.value||D.value||U()},{threshold:.1}),Q.value&&T.observe(Q.value)}),(0,s.hi)(()=>{T&&T.disconnect()}),(e,a)=>((0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("header",o,[(0,s.Lk)("div",u,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),onKeyup:(0,l.jR)(P,["enter"]),placeholder:"ìƒí’ˆëª…ì„ ìž…ë ¥í•˜ì„¸ìš”"},null,544),[[l.Jo,I.value]])]),(0,s.Lk)("div",d,[(0,s.Lk)("button",{class:(0,i.C4)(["action-btn db-toggle",S.value?"new-db-btn":"old-db-btn"]),onClick:N},(0,i.v_)(S.value?"ì‹ ê·œ DB ë°ì´í„°":"ê¸°ì¡´ DB ë°ì´í„°"),3)])]),(0,s.Lk)("nav",v,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(B,e=>(0,s.Lk)("button",{key:e.id,class:(0,i.C4)(["tab-btn",{active:A.value===e.id}]),onClick:a=>W(e.id)},(0,i.v_)(e.name),11,p)),64))]),(0,s.Lk)("section",g,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.value,t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"product-card"},[(0,s.Lk)("div",k,[(0,s.Lk)("span",h,(0,i.v_)(t.productCode),1)]),(0,s.Lk)("div",{class:"clickable-area",onClick:a=>e.$emit("view-detail",t.productCode,S.value)},[(0,s.Lk)("div",f,[(0,s.Lk)("img",{src:t.imageUrl,onError:a[1]||(a[1]=e=>e.target.src="/placeholder.png"),alt:"ìƒí’ˆ ì´ë¯¸ì§€"},null,40,b)]),(0,s.Lk)("div",m,[(0,s.Lk)("div",C,(0,i.v_)(t.category),1),(0,s.Lk)("h3",L,(0,i.v_)(t.name),1),(0,s.Lk)("div",w,[(0,s.Lk)("span",_,(0,i.v_)(t.price?.toLocaleString())+"ì›",1)])])],8,y)]))),128)),(0,s.Lk)("div",{ref_key:"loadMoreTrigger",ref:Q,class:"loading-trigger"},[F.value?((0,s.uX)(),(0,s.CE)("span",E,"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ìž…ë‹ˆë‹¤...")):D.value&&j.value.length>0?((0,s.uX)(),(0,s.CE)("span",K,"ëª¨ë“  ìƒí’ˆì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.")):(0,s.Q3)("",!0)],512),0!==j.value.length||F.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",X," ì¡°íšŒëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤. "))])]))}},j=t(6262);const I=(0,j.A)(R,[["__scopeId","data-v-6d270cae"]]);var A=I,S=(t(8111),t(1148),t(2489),t(1701),t(8335),t(4736));t(7588),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698);const x={key:0,class:"spec-filter"},F=["onClick"],D={class:"toggle-arrow"},Q={class:"filter-options"},T=["value","onChange"];var B={__name:"SpecFilter",props:{specs:{type:Object,default:()=>({})}},emits:["filter-change"],setup(e,{emit:a}){const t=a,c=(0,r.KR)({}),n=(0,r.KR)({}),o=e=>{n.value[e]=!n.value[e]},u=(e,a,l)=>{c.value[e]||(c.value[e]=new Set),l?c.value[e].add(a):(c.value[e].delete(a),0===c.value[e].size&&delete c.value[e]);const s={};Object.keys(c.value).forEach(e=>{s[e]=Array.from(c.value[e])}),t("filter-change",s)};return(a,t)=>e.specs&&Object.keys(e.specs).length>0?((0,s.uX)(),(0,s.CE)("div",x,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.specs,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{class:"filter-group",key:a},[(0,s.Lk)("div",{class:"filter-title",onClick:e=>o(a)},[(0,s.Lk)("span",D,(0,i.v_)(n.value[a]?"â–¼":"â–¶"),1),(0,s.eW)(" "+(0,i.v_)(a),1)],8,F),(0,s.bo)((0,s.Lk)("div",Q,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,e=>((0,s.uX)(),(0,s.CE)("label",{key:e,class:"filter-label"},[(0,s.Lk)("input",{type:"checkbox",value:e,onChange:t=>u(a,e,t.target.checked)},null,40,T),(0,s.eW)(" "+(0,i.v_)(e),1)]))),128))],512),[[l.aG,n.value[a]]])]))),128))])):(0,s.Q3)("",!0)}};const P=(0,j.A)(B,[["__scopeId","data-v-7f2ec7f5"]]);var W=P;const N={class:"detail-wrapper"},U={class:"detail-header"},z={key:0,class:"content-container"},H={class:"left-panel"},V={class:"image-box"},$=["src"],M={class:"widget-area"},G=["disabled"],J={key:0,class:"result-area"},q={style:{"font-weight":"bold","margin-bottom":"5px","font-size":"14px"}},Y={class:"result-grid"},Z=["onClick"],ee=["src"],ae={class:"result-name"},te={class:"result-sim"},le={class:"right-panel"},se={class:"product-name"},re={class:"product-code"},ce={key:0,class:"spec-section"},ie={class:"spec-grid"},ne={class:"spec-key"},oe={class:"spec-val"},ue={key:1,class:"chart-section"};var de={__name:"ProductDetail",props:["data","isNewDb"],emits:["go-back","view-detail"],setup(e,{emit:a}){const t=e,l=a,n=(0,r.KR)([]),o=(0,r.KR)([]),u=(0,r.KR)([]),d=(0,r.KR)(!1);let v=null;const p=(0,s.EW)(()=>{if(!t.data?.specifications)return{};try{return"string"===typeof t.data.specifications?JSON.parse(t.data.specifications):t.data.specifications}catch(e){return{}}}),g=e=>{u.value=[],window.scrollTo({top:0,behavior:"smooth"}),l("view-detail",e,t.isNewDb)},k=e=>{0!==Object.keys(e).length?o.value=n.value.filter(a=>Object.keys(e).every(t=>{const l=e[t],s=a.specifications?a.specifications[t]:null;return s&&l.includes(String(s))})):o.value=n.value},h=async()=>{if(t.data){d.value=!0,u.value=[];try{const e=o.value.map(e=>String(e.productCode)),a=await c.A.post("http://localhost:8083/api/similar-images",{pcode:String(t.data.productCode),top:10,filters:e});a.data.success?(u.value=a.data.similarImages,0===u.value.length&&alert("ì¼ì¹˜í•˜ëŠ” ìœ ì‚¬ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.")):alert("ê²€ìƒ‰ ì‹¤íŒ¨: "+a.data.error)}catch(e){console.error(e),alert("ìœ ì‚¬ ì´ë¯¸ì§€ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{d.value=!1}}},y=async()=>{if(!t.data?.priceHistory?.length)return;await(0,s.dY)();const e=document.getElementById("priceChart");if(!e)return;v&&v.destroy();const a=e.getContext("2d"),l=[...t.data.priceHistory].sort((e,a)=>new Date(e.date)-new Date(a.date));v=new S.Ay(a,{type:"line",data:{labels:l.map(e=>e.date),datasets:[{label:"ìµœì €ê°€ ì¶”ì´ (ì›)",data:l.map(e=>e.price),borderColor:"#42b983",backgroundColor:"rgba(66, 185, 131, 0.1)",fill:!0,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1}})},f=(0,r.KR)({});(0,s.sV)(async()=>{y();const e=b(t.data.categoryId);try{const a=await c.A.get("http://localhost:8083/api/category/specs",{params:{category:e}});f.value=a.data.specs;const l=t.isNewDb?"http://localhost:8083/api/new/product":"http://localhost:8083/api/product",s=await c.A.get(l,{params:{size:1e3}});n.value=s.data,o.value=s.data}catch(a){console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨",a)}});const b=e=>112756===e?"ë°ìŠ¤í¬íƒ‘":15236036===e?"ì†ŒíŒŒ":18234911===e?"íŒ¨ë”©":18242355===e?"ì‹ ë°œ":"ê¸°íƒ€";return(0,s.wB)(()=>t.data,()=>{y()}),(a,t)=>((0,s.uX)(),(0,s.CE)("div",N,[(0,s.Lk)("header",U,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>a.$emit("go-back")),class:"back-btn"},"â† ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°")]),e.data?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.Lk)("div",H,[t[4]||(t[4]=(0,s.Lk)("h2",{class:"title"},"ìƒí’ˆ ìƒì„¸ ì •ë³´",-1)),(0,s.Lk)("div",V,[(0,s.Lk)("img",{src:e.data.imageUrl,onError:t[1]||(t[1]=e=>e.target.src="/placeholder.png")},null,40,$)]),(0,s.Lk)("div",M,[t[3]||(t[3]=(0,s.Lk)("div",{class:"widget-title"},"ìœ ì‚¬ ì´ë¯¸ì§€ ê²€ìƒ‰ ì˜µì…˜",-1)),Object.keys(f.value).length>0?((0,s.uX)(),(0,s.Wv)(W,{key:0,specs:f.value,onFilterChange:k},null,8,["specs"])):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"search-btn",onClick:h,disabled:d.value},(0,i.v_)(d.value?"ê²€ìƒ‰ ì¤‘...":"ðŸ” ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰í•˜ê¸° (Top 10)"),9,G)]),u.value.length>0?((0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",q,"ê²€ìƒ‰ ê²°ê³¼ ("+(0,i.v_)(u.value.length)+"ê±´)",1),(0,s.Lk)("div",Y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,e=>((0,s.uX)(),(0,s.CE)("div",{class:"result-item",key:e.productId,onClick:a=>g(e.productCode),style:{cursor:"pointer"}},[(0,s.Lk)("img",{src:e.imageUrl,onError:t[2]||(t[2]=e=>e.target.src="/placeholder.png"),class:"result-img"},null,40,ee),(0,s.Lk)("div",ae,(0,i.v_)(e.productName),1),(0,s.Lk)("div",te,(0,i.v_)((100*e.similarity).toFixed(1))+"%",1)],8,Z))),128))])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",le,[(0,s.Lk)("h1",se,(0,i.v_)(e.data.name),1),(0,s.Lk)("p",re,"ìƒí’ˆì½”ë“œ: "+(0,i.v_)(e.data.productCode),1),e.data.specifications?((0,s.uX)(),(0,s.CE)("div",ce,[t[5]||(t[5]=(0,s.Lk)("h3",null,"ìƒì„¸ ìŠ¤íŽ™",-1)),(0,s.Lk)("div",ie,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(p.value,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"spec-item"},[(0,s.Lk)("span",ne,(0,i.v_)(a),1),(0,s.Lk)("span",oe,(0,i.v_)(e),1)]))),128))])])):(0,s.Q3)("",!0),e.data.priceHistory&&e.data.priceHistory.length>0?((0,s.uX)(),(0,s.CE)("div",ue,[...t[6]||(t[6]=[(0,s.Lk)("h3",null,"ê°€ê²© ë³€ë™ ê·¸ëž˜í”„",-1),(0,s.Lk)("div",{class:"canvas-holder"},[(0,s.Lk)("canvas",{id:"priceChart"})],-1)])])):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)]))}};const ve=(0,j.A)(de,[["__scopeId","data-v-3cb79a29"]]);var pe=ve;const ge={class:"app"};var ke={__name:"App",setup(e){const a=(0,r.KR)("list"),t=(0,r.KR)(null),l=(0,r.KR)("ë°ìŠ¤í¬íƒ‘"),i=async(e,l)=>{const s=l?"/api/new/product":"/api/product",r=await c.A.get(`http://localhost:8083${s}/${e}`);t.value=r.data,a.value="detail"};return(e,r)=>((0,s.uX)(),(0,s.CE)("div",ge,["list"===a.value?((0,s.uX)(),(0,s.Wv)(A,{key:0,initialCategory:l.value,onViewDetail:i,onUpdateCategory:r[0]||(r[0]=e=>l.value=e)},null,8,["initialCategory"])):"detail"===a.value&&t.value?((0,s.uX)(),(0,s.Wv)(pe,{key:1,data:t.value,onGoBack:r[1]||(r[1]=e=>a.value="list")},null,8,["data"])):(0,s.Q3)("",!0)]))}};const he=ke;var ye=he;(0,l.Ef)(ye).mount("#app")}},a={};function t(l){var s=a[l];if(void 0!==s)return s.exports;var r=a[l]={exports:{}};return e[l].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,l,s,r){if(!l){var c=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],r=e[u][2];for(var i=!0,n=0;n<l.length;n++)(!1&r||c>=r)&&Object.keys(t.O).every(function(e){return t.O[e](l[n])})?l.splice(n--,1):(i=!1,r<c&&(c=r));if(i){e.splice(u--,1);var o=s();void 0!==o&&(a=o)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[l,s,r]}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var s,r,c=l[0],i=l[1],n=l[2],o=0;if(c.some(function(a){return 0!==e[a]})){for(s in i)t.o(i,s)&&(t.m[s]=i[s]);if(n)var u=n(t)}for(a&&a(l);o<c.length;o++)r=c[o],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},l=self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[504],function(){return t(2099)});l=t.O(l)})();
//# sourceMappingURL=app.bc2d7bdd.js.map